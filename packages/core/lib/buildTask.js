"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createBuildTask = createBuildTask;

var _builder = require("@cranejs/builder");

var _shared = require("@cranejs/shared");

async function createBuildTask(modules, buildType) {
  const clientEnv = (0, _shared.createCliEnv)();
  const buildConfigMap = _shared.config.pages;
  const builderConfig = modules.map(moduleName => {
    return (0, _builder.createBuilderConfig)(buildConfigMap[moduleName], moduleName, clientEnv, buildType);
  });
  return async function () {
    return (0, _builder.builder)(builderConfig, buildType === _shared.BuildType.dev);
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9idWlsZFRhc2suanMiXSwibmFtZXMiOlsiY3JlYXRlQnVpbGRUYXNrIiwibW9kdWxlcyIsImJ1aWxkVHlwZSIsImNsaWVudEVudiIsImJ1aWxkQ29uZmlnTWFwIiwiY29uZmlnIiwicGFnZXMiLCJidWlsZGVyQ29uZmlnIiwibWFwIiwibW9kdWxlTmFtZSIsIkJ1aWxkVHlwZSIsImRldiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVPLGVBQWVBLGVBQWYsQ0FBK0JDLE9BQS9CLEVBQXdDQyxTQUF4QyxFQUFtRDtBQUN0RCxRQUFNQyxTQUFTLEdBQUcsMkJBQWxCO0FBQ0EsUUFBTUMsY0FBYyxHQUFHQyxlQUFPQyxLQUE5QjtBQUNBLFFBQU1DLGFBQWEsR0FBR04sT0FBTyxDQUFDTyxHQUFSLENBQWFDLFVBQUQsSUFBZ0I7QUFDOUMsV0FBTyxrQ0FDSEwsY0FBYyxDQUFDSyxVQUFELENBRFgsRUFFSEEsVUFGRyxFQUdITixTQUhHLEVBSUhELFNBSkcsQ0FBUDtBQU1ILEdBUHFCLENBQXRCO0FBU0EsU0FBTyxrQkFBa0I7QUFDckIsV0FBTyxzQkFBUUssYUFBUixFQUF1QkwsU0FBUyxLQUFLUSxrQkFBVUMsR0FBL0MsQ0FBUDtBQUNILEdBRkQ7QUFHSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1aWxkZXIsIGNyZWF0ZUJ1aWxkZXJDb25maWcgfSBmcm9tICdAY3JhbmVqcy9idWlsZGVyJ1xuaW1wb3J0IHsgbG9nZ2VyLCBCdWlsZFR5cGUsIGNvbmZpZywgY3JlYXRlQ2xpRW52IH0gZnJvbSAnQGNyYW5lanMvc2hhcmVkJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQnVpbGRUYXNrKG1vZHVsZXMsIGJ1aWxkVHlwZSkge1xuICAgIGNvbnN0IGNsaWVudEVudiA9IGNyZWF0ZUNsaUVudigpXG4gICAgY29uc3QgYnVpbGRDb25maWdNYXAgPSBjb25maWcucGFnZXNcbiAgICBjb25zdCBidWlsZGVyQ29uZmlnID0gbW9kdWxlcy5tYXAoKG1vZHVsZU5hbWUpID0+IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUJ1aWxkZXJDb25maWcoXG4gICAgICAgICAgICBidWlsZENvbmZpZ01hcFttb2R1bGVOYW1lXSxcbiAgICAgICAgICAgIG1vZHVsZU5hbWUsXG4gICAgICAgICAgICBjbGllbnRFbnYsXG4gICAgICAgICAgICBidWlsZFR5cGVcbiAgICAgICAgKVxuICAgIH0pXG5cbiAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYnVpbGRlcihidWlsZGVyQ29uZmlnLCBidWlsZFR5cGUgPT09IEJ1aWxkVHlwZS5kZXYpXG4gICAgfVxufVxuIl19