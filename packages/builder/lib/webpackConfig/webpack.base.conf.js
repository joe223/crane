"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = genBaseWebpackConfig;

var _shared = require("@cranejs/shared");

var path = _interopRequireWildcard(require("path"));

var _webpackChain = _interopRequireDefault(require("webpack-chain"));

var _vueLoader = _interopRequireDefault(require("./vue-loader.conf"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _getRequireWildcardCache() { if (typeof WeakMap !== "function") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

const VueLoaderPlugin = require('vue-loader/lib/plugin');

const cwd = process.cwd();

function resolve(dir) {
  return path.join(cwd, dir);
}

const createLintingRule = () => ({
  test: /\.(js|vue|jsx)$/,
  loader: 'eslint-loader',
  enforce: 'pre',
  include: [resolve('modules'), resolve('test')],
  options: {
    formatter: require('eslint-friendly-formatter')
  }
});

const assetsPath = p => path.join('assets', p);

function genBaseWebpackConfig(pageConfig) {
  const webpackConfig = new _webpackChain.default();
  webpackConfig.merge({
    context: resolve('.'),
    resolve: {
      extensions: ['.js', '.vue', '.json', '.jsx'],
      alias: {
        '@': resolve('modules')
      }
    },
    resolveLoader: {
      modules: [path.resolve(__dirname, '../../node_modules'), path.resolve(cwd, './node_modules')]
    },
    module: {
      rule: {
        pug: {
          test: /\.pug$/,
          use: {
            pug: {
              loader: 'pug-loader'
            }
          }
        },
        vue: {
          test: /\.vue$/,
          use: {
            vue: {
              loader: 'vue-loader',
              options: (0, _vueLoader.default)(pageConfig)
            }
          }
        },
        js: {
          test: /\.(m?js|jsx)$/,
          include: [resolve('modules'), resolve('test'), resolve('__test__'), require.resolve('webpack-dev-server/client')],
          use: {
            babel: {
              loader: 'babel-loader',
              options: {
                presets: [['@babel/preset-env', {
                  useBuiltIns: 'usage',
                  corejs: 3,
                  targets: {
                    browsers: ['> 1%', 'last 2 versions', 'not ie <= 8']
                  }
                }]]
              }
            }
          }
        },
        image: {
          test: /\.(png|jpe?g|gif|svg|apng)(\?.*)?$/,
          use: {
            url: {
              loader: 'url-loader',
              options: {
                limit: 10000,
                esModule: false,
                name: assetsPath('img/[name].[hash:7].[ext]')
              }
            }
          }
        },
        media: {
          test: /\.(mp4|webm|ogg|mp3|wav|flac|aac)(\?.*)?$/,
          use: {
            url: {
              loader: 'url-loader',
              options: {
                limit: 10000,
                name: assetsPath('media/[name].[hash:7].[ext]')
              }
            }
          }
        },
        font: {
          test: /\.(woff2?|eot|ttf|otf)(\?.*)?$/,
          use: {
            url: {
              loader: 'url-loader',
              options: {
                limit: 10000,
                esModule: false,
                name: assetsPath('fonts/[name].[hash:7].[ext]')
              }
            }
          }
        }
      }
    },
    plugin: {
      VueLoaderPlugin: {
        plugin: VueLoaderPlugin
      }
    },
    node: {
      global: false,
      __filename: false,
      __dirname: false
    }
  });
  return webpackConfig;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy93ZWJwYWNrQ29uZmlnL3dlYnBhY2suYmFzZS5jb25mLmpzIl0sIm5hbWVzIjpbIlZ1ZUxvYWRlclBsdWdpbiIsInJlcXVpcmUiLCJjd2QiLCJwcm9jZXNzIiwicmVzb2x2ZSIsImRpciIsInBhdGgiLCJqb2luIiwiY3JlYXRlTGludGluZ1J1bGUiLCJ0ZXN0IiwibG9hZGVyIiwiZW5mb3JjZSIsImluY2x1ZGUiLCJvcHRpb25zIiwiZm9ybWF0dGVyIiwiYXNzZXRzUGF0aCIsInAiLCJnZW5CYXNlV2VicGFja0NvbmZpZyIsInBhZ2VDb25maWciLCJ3ZWJwYWNrQ29uZmlnIiwiV2VicGFja0NvbmZpZyIsIm1lcmdlIiwiY29udGV4dCIsImV4dGVuc2lvbnMiLCJhbGlhcyIsInJlc29sdmVMb2FkZXIiLCJtb2R1bGVzIiwiX19kaXJuYW1lIiwibW9kdWxlIiwicnVsZSIsInB1ZyIsInVzZSIsInZ1ZSIsImpzIiwiYmFiZWwiLCJwcmVzZXRzIiwidXNlQnVpbHRJbnMiLCJjb3JlanMiLCJ0YXJnZXRzIiwiYnJvd3NlcnMiLCJpbWFnZSIsInVybCIsImxpbWl0IiwiZXNNb2R1bGUiLCJuYW1lIiwibWVkaWEiLCJmb250IiwicGx1Z2luIiwibm9kZSIsImdsb2JhbCIsIl9fZmlsZW5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxlQUFlLEdBQUdDLE9BQU8sQ0FBQyx1QkFBRCxDQUEvQjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdDLE9BQU8sQ0FBQ0QsR0FBUixFQUFaOztBQUVBLFNBQVNFLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCO0FBQ2xCLFNBQU9DLElBQUksQ0FBQ0MsSUFBTCxDQUFVTCxHQUFWLEVBQWVHLEdBQWYsQ0FBUDtBQUNIOztBQUVELE1BQU1HLGlCQUFpQixHQUFHLE9BQU87QUFDN0JDLEVBQUFBLElBQUksRUFBRSxpQkFEdUI7QUFFN0JDLEVBQUFBLE1BQU0sRUFBRSxlQUZxQjtBQUc3QkMsRUFBQUEsT0FBTyxFQUFFLEtBSG9CO0FBSTdCQyxFQUFBQSxPQUFPLEVBQUUsQ0FBQ1IsT0FBTyxDQUFDLFNBQUQsQ0FBUixFQUFxQkEsT0FBTyxDQUFDLE1BQUQsQ0FBNUIsQ0FKb0I7QUFLN0JTLEVBQUFBLE9BQU8sRUFBRTtBQUNMQyxJQUFBQSxTQUFTLEVBQUViLE9BQU8sQ0FBQywyQkFBRDtBQURiO0FBTG9CLENBQVAsQ0FBMUI7O0FBU0EsTUFBTWMsVUFBVSxHQUFJQyxDQUFELElBQU9WLElBQUksQ0FBQ0MsSUFBTCxDQUFVLFFBQVYsRUFBb0JTLENBQXBCLENBQTFCOztBQUVlLFNBQVNDLG9CQUFULENBQThCQyxVQUE5QixFQUEwQztBQUNyRCxRQUFNQyxhQUFhLEdBQUcsSUFBSUMscUJBQUosRUFBdEI7QUFFQUQsRUFBQUEsYUFBYSxDQUFDRSxLQUFkLENBQW9CO0FBQ2hCQyxJQUFBQSxPQUFPLEVBQUVsQixPQUFPLENBQUMsR0FBRCxDQURBO0FBRWhCQSxJQUFBQSxPQUFPLEVBQUU7QUFDTG1CLE1BQUFBLFVBQVUsRUFBRSxDQUFDLEtBQUQsRUFBUSxNQUFSLEVBQWdCLE9BQWhCLEVBQXlCLE1BQXpCLENBRFA7QUFFTEMsTUFBQUEsS0FBSyxFQUFFO0FBQ0gsYUFBS3BCLE9BQU8sQ0FBQyxTQUFEO0FBRFQ7QUFGRixLQUZPO0FBUWhCcUIsSUFBQUEsYUFBYSxFQUFFO0FBQ1hDLE1BQUFBLE9BQU8sRUFBRSxDQUNMcEIsSUFBSSxDQUFDRixPQUFMLENBQWF1QixTQUFiLEVBQXdCLG9CQUF4QixDQURLLEVBRUxyQixJQUFJLENBQUNGLE9BQUwsQ0FBYUYsR0FBYixFQUFrQixnQkFBbEIsQ0FGSztBQURFLEtBUkM7QUFjaEIwQixJQUFBQSxNQUFNLEVBQUU7QUFDSkMsTUFBQUEsSUFBSSxFQUFFO0FBQ0ZDLFFBQUFBLEdBQUcsRUFBRTtBQUNEckIsVUFBQUEsSUFBSSxFQUFFLFFBREw7QUFFRHNCLFVBQUFBLEdBQUcsRUFBRTtBQUNERCxZQUFBQSxHQUFHLEVBQUU7QUFDRHBCLGNBQUFBLE1BQU0sRUFBRTtBQURQO0FBREo7QUFGSixTQURIO0FBU0ZzQixRQUFBQSxHQUFHLEVBQUU7QUFDRHZCLFVBQUFBLElBQUksRUFBRSxRQURMO0FBRURzQixVQUFBQSxHQUFHLEVBQUU7QUFDREMsWUFBQUEsR0FBRyxFQUFFO0FBQ0R0QixjQUFBQSxNQUFNLEVBQUUsWUFEUDtBQUVERyxjQUFBQSxPQUFPLEVBQUUsd0JBQXNCSyxVQUF0QjtBQUZSO0FBREo7QUFGSixTQVRIO0FBa0JGZSxRQUFBQSxFQUFFLEVBQUU7QUFDQXhCLFVBQUFBLElBQUksRUFBRSxlQUROO0FBRUFHLFVBQUFBLE9BQU8sRUFBRSxDQUNMUixPQUFPLENBQUMsU0FBRCxDQURGLEVBRUxBLE9BQU8sQ0FBQyxNQUFELENBRkYsRUFHTEEsT0FBTyxDQUFDLFVBQUQsQ0FIRixFQUlMSCxPQUFPLENBQUNHLE9BQVIsQ0FBZ0IsMkJBQWhCLENBSkssQ0FGVDtBQVFBMkIsVUFBQUEsR0FBRyxFQUFFO0FBQ0RHLFlBQUFBLEtBQUssRUFBRTtBQUNIeEIsY0FBQUEsTUFBTSxFQUFFLGNBREw7QUFFSEcsY0FBQUEsT0FBTyxFQUFFO0FBQ0xzQixnQkFBQUEsT0FBTyxFQUFFLENBQ0wsQ0FDSSxtQkFESixFQUVJO0FBQ0lDLGtCQUFBQSxXQUFXLEVBQUUsT0FEakI7QUFFSUMsa0JBQUFBLE1BQU0sRUFBRSxDQUZaO0FBR0lDLGtCQUFBQSxPQUFPLEVBQUU7QUFDTEMsb0JBQUFBLFFBQVEsRUFBRSxDQUNOLE1BRE0sRUFFTixpQkFGTSxFQUdOLGFBSE07QUFETDtBQUhiLGlCQUZKLENBREs7QUFESjtBQUZOO0FBRE47QUFSTCxTQWxCRjtBQWtERkMsUUFBQUEsS0FBSyxFQUFFO0FBQ0gvQixVQUFBQSxJQUFJLEVBQUUsb0NBREg7QUFFSHNCLFVBQUFBLEdBQUcsRUFBRTtBQUNEVSxZQUFBQSxHQUFHLEVBQUU7QUFDRC9CLGNBQUFBLE1BQU0sRUFBRSxZQURQO0FBRURHLGNBQUFBLE9BQU8sRUFBRTtBQUNMNkIsZ0JBQUFBLEtBQUssRUFBRSxLQURGO0FBRUxDLGdCQUFBQSxRQUFRLEVBQUUsS0FGTDtBQUdMQyxnQkFBQUEsSUFBSSxFQUFFN0IsVUFBVSxDQUFDLDJCQUFEO0FBSFg7QUFGUjtBQURKO0FBRkYsU0FsREw7QUErREY4QixRQUFBQSxLQUFLLEVBQUU7QUFDSHBDLFVBQUFBLElBQUksRUFBRSwyQ0FESDtBQUVIc0IsVUFBQUEsR0FBRyxFQUFFO0FBQ0RVLFlBQUFBLEdBQUcsRUFBRTtBQUNEL0IsY0FBQUEsTUFBTSxFQUFFLFlBRFA7QUFFREcsY0FBQUEsT0FBTyxFQUFFO0FBQ0w2QixnQkFBQUEsS0FBSyxFQUFFLEtBREY7QUFFTEUsZ0JBQUFBLElBQUksRUFBRTdCLFVBQVUsQ0FBQyw2QkFBRDtBQUZYO0FBRlI7QUFESjtBQUZGLFNBL0RMO0FBMkVGK0IsUUFBQUEsSUFBSSxFQUFFO0FBQ0ZyQyxVQUFBQSxJQUFJLEVBQUUsZ0NBREo7QUFFRnNCLFVBQUFBLEdBQUcsRUFBRTtBQUNEVSxZQUFBQSxHQUFHLEVBQUU7QUFDRC9CLGNBQUFBLE1BQU0sRUFBRSxZQURQO0FBRURHLGNBQUFBLE9BQU8sRUFBRTtBQUNMNkIsZ0JBQUFBLEtBQUssRUFBRSxLQURGO0FBRUxDLGdCQUFBQSxRQUFRLEVBQUUsS0FGTDtBQUdMQyxnQkFBQUEsSUFBSSxFQUFFN0IsVUFBVSxDQUFDLDZCQUFEO0FBSFg7QUFGUjtBQURKO0FBRkg7QUEzRUo7QUFERixLQWRRO0FBeUdoQmdDLElBQUFBLE1BQU0sRUFBRTtBQUNKL0MsTUFBQUEsZUFBZSxFQUFFO0FBQ2IrQyxRQUFBQSxNQUFNLEVBQUUvQztBQURLO0FBRGIsS0F6R1E7QUE4R2hCZ0QsSUFBQUEsSUFBSSxFQUFFO0FBQ0ZDLE1BQUFBLE1BQU0sRUFBRSxLQUROO0FBRUZDLE1BQUFBLFVBQVUsRUFBRSxLQUZWO0FBR0Z2QixNQUFBQSxTQUFTLEVBQUU7QUFIVDtBQTlHVSxHQUFwQjtBQXFIQSxTQUFPUixhQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25maWcsIGxvZ2dlciB9IGZyb20gJ0BjcmFuZWpzL3NoYXJlZCdcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCdcbmltcG9ydCBXZWJwYWNrQ29uZmlnIGZyb20gJ3dlYnBhY2stY2hhaW4nXG5pbXBvcnQgY3JlYXRlVnVlTG9hZGVyQ29uZmlnIGZyb20gJy4vdnVlLWxvYWRlci5jb25mJ1xuXG5jb25zdCBWdWVMb2FkZXJQbHVnaW4gPSByZXF1aXJlKCd2dWUtbG9hZGVyL2xpYi9wbHVnaW4nKVxuY29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKVxuXG5mdW5jdGlvbiByZXNvbHZlKGRpcikge1xuICAgIHJldHVybiBwYXRoLmpvaW4oY3dkLCBkaXIpXG59XG5cbmNvbnN0IGNyZWF0ZUxpbnRpbmdSdWxlID0gKCkgPT4gKHtcbiAgICB0ZXN0OiAvXFwuKGpzfHZ1ZXxqc3gpJC8sXG4gICAgbG9hZGVyOiAnZXNsaW50LWxvYWRlcicsXG4gICAgZW5mb3JjZTogJ3ByZScsXG4gICAgaW5jbHVkZTogW3Jlc29sdmUoJ21vZHVsZXMnKSwgcmVzb2x2ZSgndGVzdCcpXSxcbiAgICBvcHRpb25zOiB7XG4gICAgICAgIGZvcm1hdHRlcjogcmVxdWlyZSgnZXNsaW50LWZyaWVuZGx5LWZvcm1hdHRlcicpLFxuICAgIH0sXG59KVxuY29uc3QgYXNzZXRzUGF0aCA9IChwKSA9PiBwYXRoLmpvaW4oJ2Fzc2V0cycsIHApXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdlbkJhc2VXZWJwYWNrQ29uZmlnKHBhZ2VDb25maWcpIHtcbiAgICBjb25zdCB3ZWJwYWNrQ29uZmlnID0gbmV3IFdlYnBhY2tDb25maWcoKVxuXG4gICAgd2VicGFja0NvbmZpZy5tZXJnZSh7XG4gICAgICAgIGNvbnRleHQ6IHJlc29sdmUoJy4nKSxcbiAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgZXh0ZW5zaW9uczogWycuanMnLCAnLnZ1ZScsICcuanNvbicsICcuanN4J10sXG4gICAgICAgICAgICBhbGlhczoge1xuICAgICAgICAgICAgICAgICdAJzogcmVzb2x2ZSgnbW9kdWxlcycpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzb2x2ZUxvYWRlcjoge1xuICAgICAgICAgICAgbW9kdWxlczogW1xuICAgICAgICAgICAgICAgIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi9ub2RlX21vZHVsZXMnKSxcbiAgICAgICAgICAgICAgICBwYXRoLnJlc29sdmUoY3dkLCAnLi9ub2RlX21vZHVsZXMnKVxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgbW9kdWxlOiB7XG4gICAgICAgICAgICBydWxlOiB7XG4gICAgICAgICAgICAgICAgcHVnOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC5wdWckLyxcbiAgICAgICAgICAgICAgICAgICAgdXNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwdWc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZXI6ICdwdWctbG9hZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdnVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC52dWUkLyxcbiAgICAgICAgICAgICAgICAgICAgdXNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2dWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZXI6ICd2dWUtbG9hZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBjcmVhdGVWdWVMb2FkZXJDb25maWcocGFnZUNvbmZpZyksXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGpzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC4obT9qc3xqc3gpJC8sXG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ21vZHVsZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ3Rlc3QnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoJ19fdGVzdF9fJyksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlLnJlc29sdmUoJ3dlYnBhY2stZGV2LXNlcnZlci9jbGllbnQnKSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgdXNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlcjogJ2JhYmVsLWxvYWRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXRzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0BiYWJlbC9wcmVzZXQtZW52JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUJ1aWx0SW5zOiAndXNhZ2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3JlanM6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4gMSUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsYXN0IDIgdmVyc2lvbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub3QgaWUgPD0gOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbWFnZToge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0OiAvXFwuKHBuZ3xqcGU/Z3xnaWZ8c3ZnfGFwbmcpKFxcPy4qKT8kLyxcbiAgICAgICAgICAgICAgICAgICAgdXNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkZXI6ICd1cmwtbG9hZGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbWl0OiAxMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNNb2R1bGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhc3NldHNQYXRoKCdpbWcvW25hbWVdLltoYXNoOjddLltleHRdJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWVkaWE6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVzdDogL1xcLihtcDR8d2VibXxvZ2d8bXAzfHdhdnxmbGFjfGFhYykoXFw/LiopPyQvLFxuICAgICAgICAgICAgICAgICAgICB1c2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlcjogJ3VybC1sb2FkZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGltaXQ6IDEwMDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBhc3NldHNQYXRoKCdtZWRpYS9bbmFtZV0uW2hhc2g6N10uW2V4dF0nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmb250OiB7XG4gICAgICAgICAgICAgICAgICAgIHRlc3Q6IC9cXC4od29mZjI/fGVvdHx0dGZ8b3RmKShcXD8uKik/JC8sXG4gICAgICAgICAgICAgICAgICAgIHVzZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGVyOiAndXJsLWxvYWRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW1pdDogMTAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzTW9kdWxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYXNzZXRzUGF0aCgnZm9udHMvW25hbWVdLltoYXNoOjddLltleHRdJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBwbHVnaW46IHtcbiAgICAgICAgICAgIFZ1ZUxvYWRlclBsdWdpbjoge1xuICAgICAgICAgICAgICAgIHBsdWdpbjogVnVlTG9hZGVyUGx1Z2luXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG5vZGU6IHtcbiAgICAgICAgICAgIGdsb2JhbDogZmFsc2UsXG4gICAgICAgICAgICBfX2ZpbGVuYW1lOiBmYWxzZSxcbiAgICAgICAgICAgIF9fZGlybmFtZTogZmFsc2UsXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHdlYnBhY2tDb25maWdcbn1cbiJdfQ==